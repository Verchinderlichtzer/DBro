@page "/daftar-keranjang"
@layout CustomerLayout
@inherits KeranjangListBase

<PageTitle>Daftar Keranjang</PageTitle>

@if (!_loaded)
{
    <MudProgressCircular Indeterminate />
}
else
{
    <MudDataGrid Items="_pesananList" Elevation="2" Dense Bordered ShowColumnOptions="false">
        <Columns>
            <PropertyColumn Property="x => x.Tanggal" Format="dd MMMM yyyy" HeaderClass="w-150" />
            <PropertyColumn Property="x => x.Subtotal" Format="N0" HeaderClass="w-0" />
            <PropertyColumn Property="x => x.Potongan" Format="N0" HeaderClass="w-0" />
            <PropertyColumn Property="x => x.Bayar" Format="N0" HeaderClass="w-0" />
            <PropertyColumn Property="x => x.Status.GetDescription()" HeaderClass="w-0" />
            <TemplateColumn HeaderClass="w-0" Title="Opsi">
                <CellTemplate>
                    <MudStack Row Spacing="1" Justify="Justify.Center">
                        <MudIconButton Variant="Variant.Filled" Size="Size.Small" Icon="@Icons.Material.Filled.Menu" Color="Color.Info" OnClick="@(e => NavManager.NavigateTo($"/keranjang/form/{context.Item.Id}"))" />
                    </MudStack>
                </CellTemplate>
            </TemplateColumn>
        </Columns>
        <PagerContent>
            <MudDataGridPager T="Pesanan" RowsPerPageString="Baris / halaman" InfoFormat="{first_item} - {last_item} dari {all_items} data" />
        </PagerContent>
    </MudDataGrid>
}